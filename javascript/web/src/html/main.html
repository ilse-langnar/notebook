<div data-ilse-id="main.html" data-ilse-icon="tech-box.svg" >

    <style>
        #main {
            height: 91vh;
            height: 97vh;
            margin-top: 10px;
            margin-top: 0px;
            width: 99%;
            margin: 0 auto;
        }

            #main .menu {
                /*overflow-y: auto !important;
                overflow-x: hidden !important;
                margin-left: 5px;
                height: 92vh;
                box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
                margin-right: 10px;
                flex: 1;
                flex-basis: 100%;
                border-radius: var( --border-radius );
                background: var( --primary ); */
                background: var( --primary );
                overflow-x: hidden !important;
                height: 85vh;
                height: 92vh;
                width: 99%;
                margin: 0 auto;
                border-radius: var( --border-radius );
                box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
            }

            #main .note {
                border-left: 1px solid #000;
            }

            #main .selected {
                padding: 3px;
                border-radius: var( --border-radius );
                box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px, rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;
            }

            #main .left-sidebar {
                height: 92vh;
                width: 20px !important;
                margin: 0px 5px;
                overflow: hidden;
                box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
                border-radius: var( --border-radius );
                background: var( --primary );
                border: 0 !important;
                float: left;


                /*margin-top: -48px; */

                min-width: 60px;
                flex-basis: 3%;
                max-width: 65px;
            }

                #main .left-sidebar .favorite {
                    cursor: pointer;
                }

            #main div {
                flex: 1;
                margin: 0px 3px !important;
            }

    </style>

    <div id="main" x-transition class="flex" style="justify-content: space-between;" >

        <!-- Left Sidebar -->
        <div
            x-show="$store.config.is_menu_on"
            x-transition.opacity
            class="left-sidebar" 
            :style="
                is_on ? 'max-width: 20%; ' : ' max-width: 65px; ' +
                $store.config.is_menu_on ? 'margin-left: 10px;' : ''
                "

            x-data="{ is_on: false }" >

            <div>
                <img :src="is_on ? api.require('layout-sidebar-right-expand.svg') : api.require('layout-sidebar-left-expand.svg')" style="width: 20px; display: block; margin: 0 auto; cursor: pointer; " @click="is_on = !is_on" >
            </div>

            <!-- Tabs -->
            <div x-show="!is_on" style="width: 60px;" >

                <br>

                <style>

                    .plugin-icon {
                        height: 50px !important;
                    }

                    .plugin-icon img {
                        width: 40px !important;
                        display: block;
                        margin: 0 auto !important;
                        margin-bottom: 4px !important;
                        padding: 3px !important;
                        border-radius: var( --border-radius );
                        box-shadow: rgba(50, 50, 93, 0.25) 0px 2px 5px -1px, rgba(0, 0, 0, 0.3) 0px 1px 3px -1px;
                        cursor: pointer;
                    }
                </style>

                <!-- Containers -->
                <template x-for="(item, index) in $store.tabs.list" :key="index" x-data="{ list: api.get('plugins') }" x-init="setTimeout( () => { list = api.get('plugins'); }, 3000 ); " >
                    <div class="plugin-icon" >
                        <span x-text="item.components.length" style="position: relative; left: 1px; top: 43px; color: var( --terciary ); font-family: var(--font-family3), serif, sans-serif; font-size: 0.9em; background: var(--primary); padding: 1px ; border: 1px solid var(--secondary); border-radius: 3px ; " ></span>
                        <img class="img" :src="item.icon" :style="item.is_selected ? 'border: 1px solid var(--secondary); ' : '' " alt="" @click="$store.tabs.select(item)" >
                        <!-- <div class="plugin-icon" x-html="item.string"  > </div> -->
                    </div>
                </template>

                <br>
                <img :src="api.require('plus.svg')" style="display: block; margin: 0 auto; cursor: pointer; margin-bottom: 5px; width: 35px; " title="Add new Plugin" alt="New" @click="$store.tabs.add()" />

            </div>
            <!-- Tabs -->

            <!-- ?? -->
            <div x-show="is_on" >


                <ul>
                    <li>

                        <a href="#" style="align-items: center; color: var( --secondary );" >
                            <img :src="api.require('home.svg')" style="cursor: pointer; width: 20px; " title="Add new Plugin" alt="New" @click="" />
                            <span> Home </span>
                        </a>
                        <br>

                        <a href="#" style="align-items: center; color: var( --secondary );" >
                            <img :src="api.require('brain.svg')" style="cursor: pointer; width: 20px; " title="Add new Plugin" alt="New" @click="" />
                            <span> Cognitive Exploration  </span>
                        </a>
                        <br>

                        <a href="#" style="align-items: center; color: var( --secondary );" >
                            <img :src="api.require('template.svg')" style="cursor: pointer; width: 20px; " title="Add new Plugin" alt="New" @click="" />
                            <span> Templates </span>
                        </a>
                        <br>

                        <a href="#" style="align-items: center; color: var( --secondary );" >
                            <img :src="api.require('plugin.svg')" style="cursor: pointer; width: 20px; " title="Add new Plugin" alt="New" @click="" />
                            <span> Explore Plugins </span>
                        </a>
                        <br>

                        <a href="#" style="align-items: center; color: var( --secondary );" >
                            <img :src="api.require('palette.svg')" style="cursor: pointer; width: 20px; " title="Add new Plugin" alt="New" @click="" />
                            <span> Explore Themes </span>
                        </a>
                        <br>

                        <a href="#" style="align-items: center; color: var( --secondary );" >
                            <img :src="api.require('plant.svg')" style="cursor: pointer; 5px; width: 20px; " title="Add new Plugin" alt="New" @click="" />
                            <span> Gardens  </span>
                        </a>
                        <br>

                    </li>
                </ul>

                <!-- 
                logout.svg
                tools.svg
                test-pipe.svg
                terminal.svg
                sitemap.svg
                settings.svg
                paint.svg
                moon-stars.svg
                lifebuoy.svg
                folders.svg
                building-store.svg
                brand-discord.svg
                brackets.svg -->

            </div>

        </div>
        <!-- Left Sidebar-->

        <!-- Render Actual Component -->
        <!-- <template x-for="( item, index ) in $store.tabs.get_all_components()" :key="index" style="display: flex; justify-content: space-between; " > -->
        <template x-for="( item, index ) in $store.tabs.get_all_components()" :key="index" >

            <div x-show="item.is_tab_selected && item.is_on" class="menu" x-transition.opacity style="flex: 1; display: block; margin-left: 5px;" >

                <style>
                    .menu {
                        width: 99%;
                        overflow: hidden;
                    }
                </style>

                <style>
                    .items-wrapper:hover img {
                        cursor: pointer;
                        flex: 1;
                        width: 20px !important;
                    }

                    .items-wrapper:hover .svg {
                        cursor: pointer;
                        flex: 1;
                        width: 20px !important;
                    }
                </style>

                <div class="items-wrapper" style="height: 19px;" >

                    <div class="snap" style="margin-left: 1px;" >
                        <img class="svg" :src="api.require('x.svg')" title="Close Window" alt="close" style="width: 0px; " @click="$store.tabs.remove_component({}) " >
                        <img class="svg" :src="api.require('app-window.svg')" title="Make Window Float" alt="float" style="width: 0px; "
                        @click="api.utils.make_dom_draggable( $el.parentNode.parentNode.parentNode, item, { width: '50%', height: '50%' } ); " >
                        <span class="svg" align="center" style="font-family: var( --font-family3 ); vertical-align: super; " x-text="item.name" > </span>
                    </div>

                </div>

                <!-- <div class="flex" style="justify-content: space-around; " >
                    <div x-html="api.component(item.id, item.props)" style="width: 98%; margin: 0 auto;" > </div>
                </div> -->

                <div class="flex" style="justify-content: space-around; " x-html="api.component(item.id, item.props)" style="width: 98%; margin: 0 auto;" > </div>

            </div>
        </template>

        <!-- Component[s] -->
    </div>

</template> 

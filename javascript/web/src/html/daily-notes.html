<div data-ilse-id="daily-notes.html" data-ilse-icon="calendar.svg" >
    <div id="daily-notes" x-transition data-ilse-props style="height: auto; margin: 10px; width: 99%; overflow: auto; height: 87vh; " >

        <!-- Scheduled to today -->
        <!-- <div style="border: 1px solid var( secondary ); box-shadow: var( box-shadow ); border-radius: var( border-radius );" >
            <img :src="api.require('calendar.svg')" alt="">
        </div> -->

        <img class="component-icon" :src="api.require('notes.svg')" alt="Notes" title="Notes" >

        <!-- Days -->
        <!-- Avoid having w x-data, have only 1 -->
        <div x-data="{ days: [ api.utils.get_unique_date_id().slice(0, 8)  ], today: api.utils.get_unique_date_id().slice(0, 8) }" style="overflow-x: hidden;" >
            <template x-for="(item, index) in days" :key="index" >

                <!-- day, Root -->
                <div style="padding: 10px; " x-data="{ list: api.notes.query_regexp( new RegExp( '^' + item ) ) }" >
                <!-- <div style="padding: 10px; " x-data="{ list: api.notes.query( item ) }" >  -->
                    <!-- Date + Delete -->
                    <div style="display: flex;">
                        <h1 style="center !important; color: var( --secondary );" x-text=" '&bull; &nbsp; ' + api.utils.yyyymmddhhss_to_pretty(item)" > </h1>
                        <img x-show="index !== 0" :src="api.require('x.svg')" style="width: 20px;margin-left:20px;cursor:pointer;" alt="" title="Delete" @click="days.splice( index, 1 )" >
                    </div>
                    <br>

                    <!-- <span x-html="api.component('outline.html', { list: list })" ></span> -->

                    <template x-if="list.length" >
                        <span x-html="api.component('outline.html', { list: list } )" ></span>
                    </template> 

                    <!-- <div id="outline" >
                        <span> &bull; </span>
                        <span> Write your first idea </span>
                    </div> -->

                    <!-- <button x-show="!list.length" class="load-more" @click="let fn = async function() {
                         let text    = await api.commands.run( 'html-list', { placeholder: 'Write your first note' })
                         api.notes.add( text )
                         api.store('autosave', 60000) 
                     }
                     fn()
                     " > Write your first idea </button> -->

                <style>
                    textarea#first-idea {
                       border: none;
                       outline: none;
                       background-color: #F5F5F5;
                       color: #333;
                       padding: 10px;
                       font-size: 16px;
                       border-radius: 10px;
                       box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
                       transition: box-shadow 0.3s ease;
                       resize: none;
                       width: 100%;
                    }

                    textarea:focus {
                        box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);
                    }

                    textarea::placeholder {
                        color: #999;
                        font-style: italic;
                    }

                </style>

                <!-- <textarea x-show="!list.length && /* write on day before will appear as of today*/ days[index] === api.utils.get_unique_date_id().slice( 0, 8 )" id="first-idea" placeholder="Write your first idea ..." @keydown.enter="let text = $el.value; console.log('text -> ', text); let note = api.notes.add( text ); list.push(note); console.log(note)" ></textarea> -->
                <input x-show="!list.length && /* write on day before will appear as of today*/ days[index] === api.utils.get_unique_date_id().slice( 0, 8 )" type="text" placeholder="Write your first idea ..." @keydown.enter="let text = $el.value; console.log('text -> ', text); let note = api.notes.add( text ); list.push(note); " >

                    <style>

                        input[type="text"] {
                            width: 50%;
                            width: 100%;
                            padding: 10px;
                            border: none;
                            border-radius: 5px;
                            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
                            background-color: #f8f8f8;
                            color: #444;
                            font-size: 16px;
                            transition: box-shadow 0.3s ease-in-out;
                        }

                        input[type="text"]:focus {
                            outline: none;
                            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
                        }

                        input[type="text"]::placeholder {
                            color: #999;
                        }

                        ::-webkit-input-placeholder {
                            /* Chrome/Opera/Safari */
                            font-size: 16px;
                        }

                        ::-moz-placeholder {
                            /* Firefox 19+ */
                            font-size: 16px;
                        }

                        :-ms-input-placeholder {
                            /* IE 10+ */
                            font-size: 16px;
                        }

                        :-moz-placeholder {
                            /* Firefox 18- */
                            font-size: 16px;
                        }

                    </style>

                </div>

            </template>

            <style>
                .load-more {

                    background-color: #000;
                    background-color: var( --secondary );

                    color: #fff;
                    color: var( --primary );

                    padding: 10px;

                    border: 1px solid #000;

                    border-radius: 5px;
                    font-size: 12px;
                    font-weight: 400;
                    text-transform: uppercase;
                    text-decoration: none;
                    display: inline-block;
                    cursor: pointer;
                    display: block;
                    margin: 0 auto;
                }
            </style>

            <button class="load-more" @click="let yesterday = api.utils.get_yesterday(today); days.push( yesterday ); today = yesterday" x-text=" 'Load: ' + api.utils.yyyymmddhhss_to_pretty(api.utils.get_yesterday(today) )" > </button>
        <br>

        </div>
    </div>

    <style>
    #daily-notes {
        height: 91vh;
        height: 99vh;
    }

    /*
    #daily-notes .load-more {
        display: block;
        color: var( --secondary );
        background: var( --primary );
        padding: 7px;
        border-radius: var( --border-radius );
        margin: 0 auto;
        text-align: center;
        margin-top: 10px;
    }
    */

    </style>

</div>

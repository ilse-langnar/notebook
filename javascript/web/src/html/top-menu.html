<style>

#top-menu .margin-small {
    display: inline;
    margin-left: 10px !important;
}

#top-menu .margin-large {
    margin-left: 30px;
    display: inline;
}

#top-menu .menu-item {
    width: 50%;
    margin: auto;
    display: inline;
    margin-left: 10px;
}

#top-menu .menu-item img {
    cursor: pointer;
    width: 20px;
    display: inline-block;
}

#top-menu delete-tab:hover {
    width: 10px;
}

.main-search:focus {
    outline: none;
}
</style>

<div id="top-menu" >

    <template x-data="{ tabs: ilse.tabs.list, selected: '' }" x-for=" (tab, index) in tabs" style="display: flex; float: left; " >

        <div style="flex: 1;" >

            <div> 
                <div style="width: 90px; float: left; overflow: hidden; margin-top: 1px; cursor: pointer; box-shadow: 0 0 2px 0 var( --text-color ); box-shadow-bottom: 0; border-radius: var( --border-radius ); padding: 3px; margin: 3px;" @click="window.ilse.tabs.select(tab); selected = tab.id" >
                    <img :src="ilse.require('arrow-back.svg')" style="float: left; width: 10px;" @click="if( tabs.length > 1 ) { ilse.tabs.remove( tab ); ilse.tabs.select( tabs[0] ) }" />
                    <img class="delete-tab" :src="ilse.require('x.svg')" style="float: right; width: 10px;" @click="if( tabs.length > 1 ) { ilse.tabs.remove( tab ); ilse.tabs.select( tabs[0] ) }" />
                    <span x-text="tab.name" > </span>
                </div>

                <img x-show="index === tabs.length -1" style="flex: 1; margin-top: 6px; width: 20px; cursor: pointer; display: block; " @click="tabs.push({ name: 'New', id: Math.random().toString(), components: [ 'top-menu', 'new-tab', 'status-line' ] }); ilse.tabs.select(tabs[tabs.length -1])" :src="window.ilse.require('plus.svg')" />
            </div>

        </div>

    </template>

    <!-- <div class="menu-item" >

        <img :src="window.ilse.require('command.svg')"        @click="ilse.commands.run('open-command-pallet-modal')" >
        <div class="margin-small"> </div>

        <img :src="window.ilse.require('address-book.svg')"   @click="" >
        <div class="margin-small"> </div>

        <img :src="window.ilse.require('settings.svg')"       @click="ilse.htmls.modal( window.ilse.components.configuration )" >

        <img :src="window.ilse.require('building-store.svg')" @click="ilse.htmls.modal( window.ilse.components.marketplace )" >
        <div class="margin-small"> </div>

        <img :src="window.ilse.require('folders.svg')"        @click="ilse.htmls.modal( window.ilse.components.marketplace )" >
        <div class="margin-small"> </div>

        <img :src="window.ilse.require('lifebuoy.svg')"       @click="ilse.htmls.modal( window.ilse.components.help, { overflow: 'auto' })" >
        <div class="margin-large"> </div>

        <img :src="window.ilse.require('moon-stars.svg')"     @click="window.ilse.commands.run('toggle-dark-mode')" >
        <div class="margin-large"> </div>

        <img :src="window.ilse.require('menu.svg')"     @click="" >

    </div> -->

</div>

<br>

<div class="flex" x-data="{ search: '', tabs: ilse.tabs.list }" >

    <input class="main-search" placeholder="https://example.com" style="color: var( --text-color ); background: var( --background-color ); flex: 1; margin: 0 auto; flex-basis: 50%; border: 1px solid #000;; " x-model="ilse.tabs.list[0].url" @keydown.enter="

        if( ilse.tabs.list[0].url[0] === '@' ) {
            console.log( 'search -> ', search )
            ilse.tabs.list.push({ name: search.replace( '@', '' ), url: ilse.tabs.list[0], id: Math.random().toString(), components: [ 'top-menu', search.replace( '@', '' ), 'status-line' ] });
            ilse.tabs.select(tabs[tabs.length -1])
            console.log( 'ilse.tabs.list -> ', ilse.tabs.list )
        }

        // File
        if( true ) {
        }

        // Website
        if( true ) {
        }

    " />

    <input class="main-search" placeholder="https://example.com" style="margin-right: 10px; color: var( --text-color ); background: var( --background-color ); flex: 1; margin: 0 auto; flex-basis: 20%; border: 1px solid #000;; " x-model="ilse.tabs.list[0].url" @keydown.enter="

        if( ilse.tabs.list[0].url[0] === '@' ) {
            console.log( 'search -> ', search )
            ilse.tabs.list.push({ name: search.replace( '@', '' ), url: ilse.tabs.list[0], id: Math.random().toString(), components: [ 'top-menu', search.replace( '@', '' ), 'status-line' ] });
            ilse.tabs.select(tabs[tabs.length -1])
            console.log( 'ilse.tabs.list -> ', ilse.tabs.list )
        }

        // File
        if( true ) {
        }

        // Website
        if( true ) {
        }

    " />



        <img :src="window.ilse.require('command.svg')"        @click="ilse.commands.run('open-command-pallet-modal')" >
        <div class="margin-small"> </div>

        <img :src="window.ilse.require('moon-stars.svg')"     @click="window.ilse.commands.run('toggle-dark-mode')" >
        <div class="margin-large"> </div>

        <img :src="window.ilse.require('menu.svg')"     @click="" >
</div>
